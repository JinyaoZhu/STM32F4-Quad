\chapter{绪论} \label{chap1}
相对于其它飞行器，多轴飞行器具有结构简洁，成本低廉，机动性强的优点，并且容易小型化，适合于室内飞行。

依靠地面移动的传统轮式机器人，相对于飞行机器人有：结构稳定，负载能力强，续航时间长等优点，但是其缺点也非常明显，对于复杂的
地形环境，轮式机器人往往难以通过，或者容易出现故障，如在建筑物中的楼梯，灾区中的废墟，水塘等环境中，往往难以顺利到达其作业地点，
此外轮式机器人通常需要依靠较为复杂的机械结构去适应各种地形。

固定翼飞行器，则具有续航长，行程远的优点，适合完成一些远程，并且定位精度要求较低的一些任务。其缺点是：飞行器必须一直移动，不能进行悬停作业，
对于一些需要固定点进行操作的任务不能实现。

直升飞机和多轴飞行器则具有轮式机器人与固定翼飞行器所没有的优点，能够穿越复杂的地形，并且能够悬停作业，但是直升飞机为了实现六自由度的飞行，需要十字盘等复杂精密的传动机构，其出现故障几率相对较高，并且不易于维护。而多轴飞行器或者是四轴飞行器其机械结构非常简洁，四个螺旋桨直接由电机驱动，中间不需要经过任何复杂的传动机构
即可实现了六自由度的控制，制作成本低，维护方便。并且由于结构简单，螺旋桨的响应非常迅速，机动性强，可以实现在障碍物间快速的穿越，或者跟踪复杂的路径。

近年来，多轴飞行器以其优点，引起了许多商业或研究机构的关注，如今，多轴飞行器已经广泛的用于航拍，交通管制，电力线巡逻，农业管理等领域。

然而，目前的投入使用的多轴飞行器大多数需要有专业人员来操作，并不能够实现完全自主飞行。而对于能实现完全自主飞行的空中机器人，
在将来将具有广阔的应用场景，包括协助建筑物的架设，路桥的修建，灾区搜救，物资运输，数据采集等。

\section{相关发展和研究}\label{chap1:sec1}
四轴飞行器最早出现于20世纪90年代初\citet{Breguet_Richet_Gyroplane},然而当时飞机只能飞离地面不过10米，而且飞行时间只有1分钟。在往后的近百年时间里，四轴飞行器由于其较大的体积，过短的续航能力，以及不稳定的动力学结构，并没有引起研究者过大的关注。直到21世纪初，由于微型处理器的性能提高，以及小体积，高精度的MEMS\citet{MEMS}传感器出现，使多轴飞行器的小型化成为可能。并且由于其结构简洁，制造成本低，小型的多轴飞行器开始引起研究者的关注。另一方面，由于开源飞控的兴起，四轴飞行器逐渐在航模圈中流行起来，同时由于其极轻的机身发生故障时也不容易伤害到使用者，一部分微型四轴飞行器以玩具的形式出现在公众的视野。

2010年，法国$\mathrm{Parrot}^{\circledR}$公司发布了其第一款具备航拍功能的小型四轴飞行器AR.Drone\citet{ar_drone}（图\ref{fig:ar_drone_phantom}），飞行器利用智能手机进行控制。2013年初，中国大疆创新(DJI)公司\citet{dji}发布了其第一款小型四轴航拍机Phantom\citet{dji_phantom}（图\ref{fig:ar_drone_phantom}）后不久，四轴航拍飞行器迅速风靡全国甚至全球。小型四轴航拍机由于其便携性，灵活的飞行能力，以其相对于专业航拍设备较低廉的价格，受到广大消费者的欢迎。到目前，一些消费级别的四轴飞行器已经搭载了高性能的处理器和高分辨率的图像采集模块，并通过复杂的图像处理算法实现飞行器在丢失GPS信号的室内环境中自主悬停，或者自主躲避障碍物。
\begin{figure}[!ht]
\centering
$
\begin{array}{cc}
  \includegraphics[width=7.2cm,height=4.6cm]{figures/ar_drone.jpg} & \includegraphics[width=7.2cm,height=4.6cm]{figures/phantom4.jpg} \\
  (a) & (b)
\end{array}
$
\caption{(a)AR.Drone; (b)DJI Phantom;}
\label{fig:ar_drone_phantom}
\end{figure}

在近十年内，小型四轴飞行器，由于其极小的体积以其极强的机动性，引起了不少研究者与相关企业的关注。四轴飞行器由于其结构简洁，动力学模型容易构建，并且能够实现悬停，许多研究者以四轴飞行器为平台，来研究飞行机器人在缺乏GPS信号的室内环境中控制，感知和规划问题，包括飞行机器人的室内定位，姿态和位移控制，路径规划以及同步建图与定位(SLAM)\citet{SLAM}等。

2012年初，美国宾夕法尼亚大学的机器人学家Vijay Kumar，在TED上发表了名为“Robots that fly and cooperate”\citet{ted_vijay_talk}的演讲，向世界展示了实验室中具有惊人机动性的四轴飞行器，具有团队合作能力飞行机器人，以及目前处于研究阶段的飞行机器人SLAM技术。在宾夕法尼亚大学的GRASP实验室（图\ref{fig:penn_eth_lab}）中配备了Vicon Motion Systems\citet{vicon}公司一套具有20个高速红外相机的光学运动捕捉系统，用于飞行机器人的室内空间定位，系统能以200Hz以上的频率运行，能实时反馈多个飞行机器人的三维位置信息，三维姿态信息，是研究飞行机器人运动控制与规划问题的一个非常理想的试验平台。此外，GRASP实验室成员S.Shaojie et al.对利用机载摄像机进行飞行器状态估计和控制的问题进行了研究\citet{Shen2013}，其中四轴飞行器上安装了两个小型摄像机，一个以较高频率运行，配合IMU完成SLAM任务，另一个摄像头以低频率运行，负责参数校正。S.Tang et al.研究了四轴飞行器在软线悬挂负载状态下的路径规划问题\citet{Tang2015}，将负载物体的运动轨迹考虑到问题当中。L.Giuseppe et al.\citet{Loianno2015}研究了飞行机器人团队合作SLAM的问题。

2013年6月，苏黎世联邦理工学院(ETH Zürich)教授Raffaello D'Andrea以及其团队在TED大会上进行了名为“The astounding athletic power of quadcopters ”\citet{ted_raffaello_talk}的演讲，向人们展示了四轴飞行器强大的运动能力，在演讲上展示了飞行机器人极强的鲁棒性以及四轴飞行器控制的倒立摆\citet{Hehn2011}，飞行机器人团队合作表演\citet{Schoellig2010}等成果。观众们纷纷被其四轴飞行机器人灵活，高机动的运动性能所震撼，视频不久在互联网上被迅速传播，引起了许多爱好者和相关研究人员的关注。该演讲中的飞行机器人控制技术主要在苏黎世联邦理工学院的Flying Machine Arena（图\ref{fig:penn_eth_lab}）进行研究，类似宾夕法尼亚大学的GRASP实验室，该实验室配备了一套具有8个高速红外相机VICON光学运动捕捉系统，图像运算频率能达200Hz以上，飞行器采用Ascending Technologies\citet{ascendingtechnologies}公司的Hummingbird（图\ref{fig:hummingbird}）小型四轴飞行器。
\begin{figure}[!ht]
\centering
$
\begin{array}{cc}
  \includegraphics[width=0.45\textwidth]{figures/penn_lab.jpg} & \includegraphics[width=0.473\textwidth]{figures/eth_lab.jpg} \\
  (a) & (b)
\end{array}
$
\caption{(a)宾夕法尼亚大学GRASP实验室; (b)苏黎世联邦理工学院Flying Machine Arena;}
\label{fig:penn_eth_lab}
\end{figure}
\begin{figure}[!ht]
  \centering
  \includegraphics[width=0.4\textwidth]{figures/asctec_hummingbird.jpg}
  \caption{Hummingbird四轴飞行器}\label{fig:hummingbird}
\end{figure}


\section{设计动机}\label{chap1:sec2}
四轴飞行器要在室内自主飞行，其中一个主要问题是如何进行定位。目前，在室内环境中一方面有基于无线电的定位方法，如RFID，iBeacon，无线电指纹等；也有基于机械波的定位方法，如超声波，麦克风阵列等，而这类的定位方法往往精度较低，并且延迟大，更新速率低，不适合做为飞行器的位置信号反馈。另一方面，也有基于图像处理的室内定位方法，包括光流法，基于双目摄像头或单目摄像头的SLAM算法等，然而，对于光流法，由于其检测的是飞行器的速度，长时间飞行后会产生较大的累积误差。对于SLAM一类的算法，其算法复杂，运算量大，难以获得高速率，低延迟的数据反馈，一般用于室内飞行器的低动态飞行运动控制。

本设计旨在建立一个室内飞行机器人实验平台，能够完成室内飞行机器人的高动态运动控制，精确的运动轨迹跟踪等任务。为了获得高速率，低延迟，低噪声的位置信息反馈，本设计采用类似光学运动捕捉系统的结构，利用外部相机对飞行器进行定位，给飞行器提供较高质量的空间位置与姿态信息反馈。在解决了飞行器室内控制与定位问题后，本文探讨了飞行器的路径规划问题，利用计算机为飞行器生成最优的路径，实现飞行路径的精确跟踪，并且提供了一些演示场景。

本文的内容分布如下：第\ref{chap2}章介绍了四轴飞行器与室内定位系统的硬件配置，整个系统的结构，以及一些硬件性能参数。第\ref{chap3}章推导了四轴飞行器的动力学模型，姿态和位置控制的控制律，讨论了四轴飞行器在大角度下的控制的方法，最后，在MATLAB上进行了仿真，并进行了实际测试。第\ref{chap4}章探讨了飞行器的状态估计问题，设计了次优滤波器估计四轴飞行器的姿态与位置信息，并对测量延迟问题进行了讨论，最后给出了仿真效果与实际效果。第\ref{chap5}章介绍了由红外相机构建的飞行器室内定位系统，讨论了室内定位的原理，并测试了实际性能。第\ref{chap6}章探讨了飞行器的三维路径规划问题，给出了生成最优（最小抖动）飞行路径的几种方法，并给出在仿真环境中和实际环境中的跟踪效果。第\ref{chap7}章为全文的总结，探讨该设计中目前存在的一些不足，与一些发展潜能。
