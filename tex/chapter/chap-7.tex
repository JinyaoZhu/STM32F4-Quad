\chapter{结束语}\label{chap7}
\section{总结}
本文详细介绍了一个实现飞行机器人室内自主飞行的具体设计与实现方案。

第\ref{chap2}章中介绍了组成该系统的具体硬件需求，以及其性能配置，包括飞行器，与室内定位系统两大部分。通过调查，分析，室内定位系统采用了定位精度高，更新频率高的光学运动捕捉系统方案。目前，商用的光学运动捕捉系统价格普遍较高，一般的系统价格高达数万元到数十万元人民币，一般只有较大型的研究所或商业机构才能够配备。而本文提供的室内定位系统方案，成本相对较低，整套系统的价格能限制在5000元人民币以内，并且有较好的定位性能。配合设计中的飞行器系统，构成了一个较理想的飞行机器人实验平台。

第\ref{chap3}章中，详细介绍了四轴飞行器的动力学模型，推导了飞行器的状态方程，设计了飞行器姿态与位移控制的控制律，并通过在\matlab软件中仿真实验，得到近似的控制器参数后，在实际飞行器中验证，取得较好的控制效果，在大角度控制时飞行器的姿态控制器依然性能良好。在跟踪给定飞行路径中，跟踪误差较少。在实验中，飞行器进行路径跟踪时最大加速度能达到$7\mathrm{m}/\mathrm{s}^2$，最大倾斜角度超过$60^\circ$。

第\ref{chap4}章，讨论了飞行器的状态估计问题，考虑到飞行器控制器的处理能力，以及高采样率的需要，设计了次优滤波器对飞行器的姿态和位移进行估计，同时考虑了测量延迟带来的影响，设计了补偿方案。实际中取得了较好的估计效果。

第\ref{chap5}章，讨论了室内定位系统的设计与实现原理，通过在飞行器上安装主动标记物，利用基于双目红外摄像机的光学定位系统获得飞行器的位移与姿态信息，测量的数据以$40\mathrm{Hz}$的频率通过蓝牙发送给飞行器。经过实际测量，定位系统的精度大约为1cm，噪声标准差大约为$\sigma=0.012\mathrm{m}$。

第\ref{chap6}章，研究了飞行器控制中的上层控制算法，路径规划。通过给定的起始位置，终点位置，以及中间点的位置，以使飞行器产生以最小抖动为目标，光滑，合理的的飞行轨迹。文中提供了两种生成方法，一种基于求解线性方程组来得到飞行轨迹多项式系数，该方法运算量少，适用面广，但是不能进行不等式约束。另一种方法基于二次规划(QP)来求解路径多项式的系数，通过加入不等式约束，能够让飞行路径限制在某个空间区域内，适用于飞行器需要穿越障碍物的情况，但运算时间相对方法一较长，同时当路径的中间点数较多时，会出现求解器不稳定，导致无解的情况。

最后，为了验证飞行器以及室内定位系统的综合性能，尝试利用飞行器进行乐器演奏（图\ref{fig:quad_playing_instrument}），总体结果比较理想。
\begin{figure}[!ht]
  \centering
  \includegraphics[width=0.6\textwidth]{figures/quad_playing_instrument.jpg}
  \caption{飞行器进行演奏}\label{fig:quad_playing_instrument}
\end{figure}

\section{展望}
目前，人们对四轴飞行器已经不陌生，近几年与四轴飞行器相关的公司大量涌现。然而，目前消费级的多轴飞行器基本上只适用于室外环境，即使能够在室内飞行，也需要专人来手动操作才能完成任务。目前的消费级小型四轴飞行器中，基本上还没有应用到同步建图与定位(SLAM)技术或者动态路径规划等相对高级的机器人控制算法，要求飞行器能在室内环境中自主完成任务就更难了。然而，室内自主飞行机器人，在未来有广阔的应用前景，比如，在灾区或恶劣地形的搜救中，可以发挥四轴飞行器能够悬停，穿越能力强的优点，配合工作人员高效地完成相关的任务；在工厂中利用飞行器来高效搬运货物；在反恐行动中，利用自主飞行的机器人对未知内部结构的建筑物建立三维室内地图，协助军队高效完成任务。

本设计中的室内定位系统一方面为飞行器提供了精确可靠的反馈信息，但另一方面它限制了飞行器的飞行范围，这也是光学运动捕捉系统的优点和缺点。但是，对于研究者来说，该定位系统为飞行机器人的实验提供了良好的平台，以该平台为基础，可以进行对飞行器控制，路径规划，团队协作等问题进行深入研究，而且研究的结果往往也适用于使用其他定位系统进行定位的情况下。目前，本设计中控制的是一个飞行器，当能加入更多的飞行器进行团队合作的时候，飞行器就能完成更多更复杂的任务了，例如，可以配合机械臂进行模拟的物资运输，或者合作搭建建筑物等。当然，这样涉及的问题就更多了，例如，对于飞行控制器：飞行器在运送不同的物体时，如何实时估计飞行器的物理模型参数，在线调整控制器的参数；当飞行器之间路径有冲突，飞行器如何自主调整最优路径，以避免发生碰撞。对于室内定位系统：当区域内标记点数量较多的时候如何进行快速准确的立体匹配，等等。

随着机器人控制技术和人工智能技术的进一步深入研究与发展，在我们将来的生活中一定会出现更多各种形式的机器人，他们将会服务于人类，使我们的生活变得更加便捷。

